{
    "name": "postgres",
    "djClassName": "org.dashjoin.service.SQLDatabase",
    "username": "postgres",
    "password": "DJ1#\bLN1ubFw94pZSZQ4cSG6KxbWukt/wsaZd",
    "url": "jdbc:postgresql://postgres:5432/postgres",
    "ID": "dj/postgres",
    "tables": {
        "Lernziel": {
            "dj-label": "${Ziel}",
            "properties": {
                "Fachbereich": {
                    "ref": "dj/postgres/Fachbereich/ID",
                    "displayWith": "fk"
                }
            }
        },
        "Fachbereich": {
            "instanceLayout": {
                "widget": "page",
                "children": [
                    {
                        "widget": "container",
                        "children": [
                            {
                                "database": "postgres",
                                "query": "lernziel",
                                "arguments": "{\"Fachbereich\": value.ID}",
                                "widget": "table"
                            }
                        ]
                    }
                ]
            },
            "tableLayout": {
                "widget": "page",
                "children": [
                    {
                        "title": "Table: ${value.name}",
                        "widget": "table"
                    },
                    {
                        "widget": "dj-table-metadata"
                    }
                ]
            }
        },
        "Lernziel2Inhalt": {
            "properties": {
                "Inhalt": {
                    "ref": "dj/postgres/Inhalt/ID",
                    "displayWith": "fk"
                },
                "Lernziel": {
                    "ref": "dj/postgres/Lernziel/ID",
                    "displayWith": "fk"
                }
            }
        },
        "Inhalt": {
            "instanceLayout": {
                "widget": "page",
                "children": [
                    {
                        "title": "Edit Record",
                        "widget": "edit"
                    },
                    {
                        "title": "Related Records",
                        "widget": "links"
                    },
                    {
                        "title": "",
                        "print": "(\n$x := $curl(\"POST\", \"https://api.openai.com/v1/chat/completions\", {\n    \"model\": \"gpt-4o-mini\",\n    \"messages\": [\n      {\n        \"role\": \"system\",\n        \"content\": \"Du bist ein Medizin Professor. Stelle mir eine Frage zu dem Text den ich Dir gebe.\"\n      },\n      {\n        \"role\": \"user\",\n        \"content\": value.Inhalt\n      }\n    ]\n }, {\"Authorization\": \"openai\"}).choices[0].message.content;\n$setVariable(\"frage\", $x);\n$refresh();\n)\n",
                        "text": "Stelle Frage",
                        "widget": "button"
                    },
                    {
                        "display": "variable.frage",
                        "widget": "display"
                    },
                    {
                        "print": "(\n$x := $curl(\"POST\", \"https://api.openai.com/v1/chat/completions\", {\n    \"model\": \"gpt-4o-mini\",\n    \"response_format\": { \"type\": \"json_object\" },\n    \"messages\": [\n      {\n        \"role\": \"system\",\n        \"content\": \"Du bist ein strenger Medizin Professor. Stelle mir eine Fachfrage zu dem Text den ich Dir gebe. Anschließend bewertest Du die Antwort mit einem JSON Objekt, das die folgenden Felder enthält:\nfeedback: ein feedback mit 60 wörtern, mit Erklärung zur richtigen Antwort, Hinweise auf häufige Fehler und Tipps, wie das Lernziel besser verstanden werden kann\nprozent: ein prozentwert der die güte der antwort beschreibt\n\"\n      },\n      {\n        \"role\": \"user\",\n        \"content\": value.Inhalt\n      },\n      {\n        \"role\": \"assistant\",\n        \"content\": variable.frage\n      },\n      {\n        \"role\": \"user\",\n        \"content\": form.antwort\n      }\n    ]\n }, {\"Authorization\": \"openai\"}).choices[0].message.content;\n)\n",
                        "text": "Sende Antwort",
                        "expression": "",
                        "widget": "button",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "antwort": {
                                    "widget": "voice"
                                }
                            }
                        }
                    }
                ]
            }
        }
    },
    "readRoles": [
        "authenticated"
    ]
}